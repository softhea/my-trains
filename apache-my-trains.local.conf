<VirtualHost *:80>
    ServerName my-trains.local
    DocumentRoot "C:\laragon\www\my-trains\public"
    
    <Directory "C:\laragon\www\my-trains\public">
        AllowOverride All
        Require all granted
        DirectoryIndex index.php
    </Directory>
    
    <Directory "C:\laragon\www\my-trains">
        AllowOverride None
        Require all denied
    </Directory>
    
    # Enable rewrite module for Laravel
    RewriteEngine On
    
    # Handle Laravel's pretty URLs
    <Directory "C:\laragon\www\my-trains\public">
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php [QSA,L]
    </Directory>
    
    # Security headers
    Header always set X-Frame-Options DENY
    Header always set X-Content-Type-Options nosniff
    
    # Logging
    ErrorLog "logs/my-trains.local-error.log"
    CustomLog "logs/my-trains.local-access.log" combined
    
    # PHP configuration for Laravel
    <IfModule mod_php.c>
        php_value upload_max_filesize 8M
        php_value post_max_size 10M
        php_value memory_limit 128M
        php_value max_execution_time 300
        php_value max_input_time 300
        php_value date.timezone "UTC"
    </IfModule>
</VirtualHost>

# Additional configuration for SSL (optional)
# <VirtualHost *:443>
#     ServerName my-trains.local
#     DocumentRoot "C:\laragon\www\my-trains\public"
#     
#     SSLEngine on
#     SSLCertificateFile "path/to/your/certificate.crt"
#     SSLCertificateKeyFile "path/to/your/private.key"
#     
#     <Directory "C:\laragon\www\my-trains\public">
#         AllowOverride All
#         Require all granted
#         DirectoryIndex index.php
#     </Directory>
# </VirtualHost>